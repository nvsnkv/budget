<div class="operations-container">
  <div tuiCardLarge class="operations-card">
    <div class="header">
      <h2 tuiTitle size="l">Operations</h2>
      <div class="header-actions">
        <button 
          tuiButton
          type="button"
          appearance="primary"
          size="m"
          (click)="navigateToImport()">
          Import Operations
        </button>
        <button 
          tuiButton
          type="button"
          appearance="secondary"
          size="m"
          (click)="navigateToLogbook()">
          View Logbook
        </button>
        <button 
          tuiButton
          type="button"
          appearance="secondary"
          size="m"
          (click)="navigateToDuplicates()">
          View Duplicates
        </button>
        <button 
          tuiButton
          type="button"
          appearance="secondary"
          size="m"
          (click)="navigateToRetag()">
          Retag Operations
        </button>
        <button 
          tuiButton
          type="button"
          appearance="secondary"
          size="m"
          (click)="navigateToTransfers()">
          View Transfers
        </button>
        <button 
          tuiButton
          type="button"
          appearance="destructive"
          size="m"
          (click)="navigateToDelete()">
          Delete Operations
        </button>
        <button 
          tuiButton
          type="button"
          appearance="secondary"
          size="m"
          (click)="navigateToBudget()">
          Budget Details
        </button>
      </div>
    </div>

    <!-- Filters -->
    <div class="filters-section">
      <h3 tuiTitle size="m">Filters</h3>
      <app-criteria-filter
        [initialCriteria]="currentCriteria"
        [examples]="criteriaExamples"
        [showExamplesInitially]="false"
        (criteriaSubmitted)="onCriteriaSubmitted($event)"
        (criteriaCleared)="onCriteriaCleared()">
        
        <div class="additional-filters">
          <div class="filter-item">
            <tui-textfield>
              <label tuiLabel>Output Currency</label>
              <input 
                tuiTextfield 
                [(ngModel)]="outputCurrency"
                type="text" 
                placeholder="e.g., USD, EUR"
              />
            </tui-textfield>
          </div>
          
          <div class="filter-item">
            <label tuiLabel size="m">
              <input 
                tuiCheckbox
                type="checkbox" 
                [(ngModel)]="excludeTransfers"
              />
              Exclude Transfers
            </label>
          </div>
        </div>
      </app-criteria-filter>
    </div>

    <!-- Operations List -->
    <div class="operations-section">
      @if (operations$ | async; as ops) {
        @if (ops.length > 0) {
          <app-operations-table 
            [operations]="operations" 
            [showActions]="true"
            (operationDeleted)="onDeleteOperation($event)"
            (operationUpdated)="onUpdateOperation($event)">
          </app-operations-table>
          
          <div class="operations-count">
            Total: {{ operations.length }} operations
          </div>
        } @else {
          <div class="empty-state">
            <p>No operations found.</p>
            <button 
              tuiButton
              type="button"
              appearance="primary"
              size="m"
              (click)="navigateToImport()">
              Import Operations
            </button>
          </div>
        }
      } @else {
        <tui-loader [showLoader]="true">
          <div class="loading-placeholder">Loading operations...</div>
        </tui-loader>
      }
    </div>
  </div>
</div>

